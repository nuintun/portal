!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("portal",n):e.Portal=n()}(this,function(){"use strict";function e(e){return String(e).replace(/[&<>\'\"]/g,function(e){return r[e]})}function n(e){return e.replace(p,"\\$&")}function t(e,t){var r=this;r.open=new RegExp(n(e||"<%"),"g"),r.close=new RegExp(n(t||"%>"),"g"),r.helpers={}}var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#x22;","'":"&#x27;"},u=Date.now||function(){return+new Date},p=/[\[\]\\.^|()*+$:?!-]/g,c=/\n|\r\n/g,o=/^\s*|\s*$/g,l=/\x11\s*(.+?)\s*\x13/g,a=/\x11=\s*(.+?)\s*\x13/g,i=/\x11==\s*(.+?)\s*\x13/g,s=/'(?![^\x11\x13]+?\x13)/g,g=/(^|[^\w\u00c0-\uFFFF_]):(?=\w)/g,f=/(^|[^\w\u00c0-\uFFFF_]):(?=\[)/g,h=/(^|[^\w\u00c0-\uFFFF_])@(?=\w)/g,x=/(^|[^\w\u00c0-\uFFFF_])@(?=\[)/g;return t.prototype={helpers:{},compile:function(t){function r(n){return v.call({line:1,output:"",data:n,helpers:F.helpers,escapeHTML:e})}var p=1,F=this,d=u(),w="__CONTEXT"+d,$="__HELPERS"+d,_="__DATA"+d,m="'use strict';\n\ntry {\n  var "+w+" = this;\n  var "+_+" = "+w+".data;\n  var "+$+" = "+w+".helpers;\n\n  "+w+".output += '"+String(t).replace(F.open,"").replace(F.close,"").replace(s,"\\x27").replace(o,"").replace(c,function(){return"';\n  "+w+".line = "+ ++p+";\n  "+w+".output += '\\n"}).replace(i,"' + ($1) + '").replace(a,"' + "+w+".escapeHTML($1) + '").replace(g,"$1"+$+".").replace(f,"$1"+$).replace(h,"$1"+_+".").replace(x,"$1"+_).replace(l,"';\n  $1\n  "+w+".output += '")+"';\n\n  return "+w+".output;\n} catch (e) {\n  throw 'TemplateError: ' + e + ' (at ' + ' line ' + "+w+".line + ')';\n}",v=new Function(m.replace(new RegExp(n(w+".output += '';")+"\n *","g"),""));return r.toString=function(){return v.toString()},{render:r}},addHelper:function(e,n){return this.helpers[e]=n,this},removeHelper:function(e){return delete this.helpers[e],this}},t});
//# sourceMappingURL=portal.js.map