!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("portal",n):e.Portal=n()}(this,function(){"use strict";function e(e){return String(e).replace(/[&<>\'\"]/g,function(e){return t[e]})}function n(e){return e.replace(u,"\\$&")}function r(e,r){var t=this;t.open=new RegExp(n(e||"<%"),"g"),t.close=new RegExp(n(r||"%>"),"g")}var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#x22;","'":"&#x27;"},p=Date.now||function(){return+new Date},u=/[\[\]\\.^|()*+$:?!-]/g,a=/\n|\r\n/g,c=/^\s*|\s*$/g,o=/\x11\s*(.+?)\s*\x13/g,l=/\x11=\s*(.+?)\s*\x13/g,i=/\x11==\s*(.+?)\s*\x13/g,s=/'(?![^\x11\x13]+?\x13)/g,f=/(^|[^\w\u00c0-\uFFFF_]):(?=\w)/g,g=/(^|[^\w\u00c0-\uFFFF_]):(?=\[)/g,h=/(^|[^\w\u00c0-\uFFFF_])@(?=\w)/g,x=/(^|[^\w\u00c0-\uFFFF_])@(?=\[)/g;return r.prototype={helpers:{escapeHTML:e},compile:function(e){if(!e&&""!==e||"string"!=typeof e.valueOf())throw TypeError("TemplateError: view must be a string");var r=1,t=this,u=p(),F="__CONTEXT"+u,d="__HELPERS"+u,w="__DATA"+u,$="'use strict';\n\ntry {\n  var "+F+" = this;\n  var "+d+" = "+F+".helpers;\n  var "+w+" = "+F+".data;\n\n  "+F+".output += '"+e.replace(t.open,"").replace(t.close,"").replace(s,"\\x27").replace(c,"").replace(a,function(){return"';\n  "+F+".line = "+ ++r+";\n  "+F+".output += '\\n"}).replace(i,"' + ($1) + '").replace(l,"' + "+d+".escapeHTML($1) + '").replace(f,"$1"+d+".").replace(g,"$1"+d).replace(h,"$1"+w+".").replace(x,"$1"+w).replace(h,"$1"+F+".data.").replace(x,"$1"+F+".data").replace(o,"';\n  $1\n  "+F+".output += '")+"';\n\n  return "+F+".output;\n} catch (e) {\n  throw 'TemplateError: ' + e + ' (at ' + ' line ' + "+F+".line + ')';\n}",m=new RegExp(n("\n"+F+".output += '';")+"\n","g"),_=new Function($.replace(m,"\n"));return{compiler:_,render:function(e){return _.call({line:1,output:"",data:e,helpers:t.helpers})}}},addHelper:function(e,n){return this.helpers[e]=n,this},removeHelper:function(e){return delete this.helpers[e],this}},r});
//# sourceMappingURL=portal.js.map