!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("portal",r):e.Portal=r()}(this,function(){"use strict";function e(e){return String(e).replace(/[&<>\'\"]/g,function(e){return n[e]})}function r(e){return e.replace(a,"\\$&")}function t(e,t){var n=this;n.open=new RegExp(r(e||"<%"),"g"),n.close=new RegExp(r(t||"%>"),"g")}var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#x22;","'":"&#x27;"},p=Date.now||function(){return+new Date},a=/[\[\]\\.^|()*+$:?!-]/g,o=/\n|\r\n/g,u=/^\s*|\s*$/g,c=/\x11\s*(.+?)\s*\x13/g,l=/\x11=\s*(.+?)\s*\x13/g,i=/\x11==\s*(.+?)\s*\x13/g,s=/'(?![^\x11\x13]+?\x13)/g,f=/(^|[^\w\u00c0-\uFFFF_]):(?=\w)/g,g=/(^|[^\w\u00c0-\uFFFF_]):(?=\[)/g,h=/(^|[^\w\u00c0-\uFFFF_])@(?=\w)/g,w=/(^|[^\w\u00c0-\uFFFF_])@(?=\[)/g;return t.prototype={helpers:{escapeHTML:e},compile:function(e){if(!e&&""!==e||"string"!=typeof e.valueOf())throw TypeError("TemplateError: view must be a string");var t=1,n=this,a=p(),x="__CONTEXT"+a,F="__HELPERS"+a,d="__DATA"+a,m="'use strict';\n\ntry {\n  var "+x+" = this;\n  var "+F+" = "+x+".helpers;\n  var "+d+" = "+x+".data;\n\n  "+x+".output += '"+e.replace(n.open,"").replace(n.close,"").replace(s,"\\x27").replace(u,"").replace(o,function(){return"';\n  "+x+".line = "+ ++t+";\n  "+x+".output += '\\n"}).replace(i,"' + ($1) + '").replace(l,"' + "+F+".escapeHTML($1) + '").replace(f,"$1"+F+".").replace(g,"$1"+F).replace(h,"$1"+d+".").replace(w,"$1"+d).replace(h,"$1"+x+".data.").replace(w,"$1"+x+".data").replace(c,"';\n  $1\n  "+x+".output += '")+"';\n\n  return "+x+".output;\n} catch (e) {\n  throw 'TemplateError: ' + e + ' (at ' + ' line ' + "+x+".line + ')';\n}",v=new RegExp(r("\n"+x+".output += '';")+"\n","g"),T=new Function(m.replace(v,"\n"));return{compiler:T,render:function(e){return T.call({line:1,output:"",data:e,helpers:n.helpers})}}},addHelper:function(e,r){if("escapeHTML"===e)throw"TemplateError: can not rewrite native helper";return this.helpers[e]=r,this},removeHelper:function(e){if("escapeHTML"===e)throw"TemplateError: can not remove native helper";return delete this.helpers[e],this}},t});
//# sourceMappingURL=portal.js.map